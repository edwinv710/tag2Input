var Tag2Input=function(){var a="tag2-input",b="label",c=[" "],d=function(a,b){var c=a.delimiter.join("|");console.log(c);var d=new RegExp(c);return function(c){if(d.test(this.value)){var e=this.value.split(d);d.test(this.value[this.value.length-1])&&e.pop(),a.add(e),this.value="",b.innerHTML=""}else b.innerHTML=this.value;this.style.width=b.clientWidth+(this.offsetWidth-this.clientWidth+5)+"px"}},e=function(b){if("string"==typeof b&&(b=document.getElementById(b)),!(b instanceof HTMLElement))throw"Please provide a valid container.";return b.className=" "+a,b.onclick=function(a){a.target===this&&this.getElementsByTagName("input")[0].focus()},b},f=function(){var a=document.createElement("span");return a.className="hiddenSpan",a.style.position="absolute",a.style.display="inline-block",a.style.height="0px",a.style.left="0",a.style.top="0",a.style.overflow="hidden",a},g=function(a,b){var c=document.createElement("input");return c.setAttribute("type","text"),c.setAttribute("size","1"),c.addEventListener("input",d(a,b),!0),c.addEventListener("paste",d(a,b),!0),c.addEventListener("keyup",function(b){8==b.which&&0==this.value.length&&a.pop()}),c},h=function(a,b,c){a.appendChild(c),a.appendChild(b);var d=b.currentStyle||window.getComputedStyle(b);console.log(d.border)},i=function(a){return function(b){var c=document.getElementById(b.dataTransfer.getData("item")),d=b.target,e=d.parentNode;return a?e.parentNode.insertBefore(c,e):e.parentNode.insertBefore(c,e.nextSibling),b.stopPropagation(),!1}},j=function(a,b,c,d){var e=document.createElement("div"),f=document.createElement("span"),g=document.createElement("span"),h=document.createElement("span");return e.className="label close",e.id="label-"+Math.random().toString(36).substr(2,18).toUpperCase(),g.innerText=a,g.className="content",b&&(g.setAttribute("contenteditable",!0),g.addEventListener("keydown",function(a){8===a.which&&1===this.innerHTML.length&&this.parentNode.parentNode.removeChild(this.parentNode)})),f.className="drop-left",f.innerHTML="&nbsp;",h.innerHTML="&nbsp;",h.className="drop-right",e.appendChild(f),e.appendChild(g),e.appendChild(h),d&&h.addEventListener("click",function(a){this.parentNode.parentNode.removeChild(this.parentNode)}),c&&(e.setAttribute("draggable","true"),f.addEventListener("dragenter",function(a){return a.preventDefault(),!0}),h.addEventListener("dragenter",function(a){return a.preventDefault(),!0}),f.addEventListener("dragover",function(a){return a.preventDefault(),!0}),h.addEventListener("dragover",function(a){return a.preventDefault(),!0}),f.addEventListener("drop",i(!0)),h.addEventListener("drop",i(!1)),e.addEventListener("dragstart",function(a){return a.dataTransfer.setData("item",this.id),!0})),e},k=function(a,b){var d=f();this.delimiter=b.delimiter||c,this.delimiter=this.delimiter instanceof Array?this.delimiter:[this.delimiter],this.delimiter=this.delimiter.map(function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}),this.editable=0!=b.editable,this.draggable=0!=b.draggable,this.delete=0!=b.delete,this.container=e(a),this.input=g(this,d),h(this.container,this.input,d)};return k.prototype={add:function(a){a instanceof Array||(a=[label]);for(var b=0;b<a.length;b++)a[b]=j(a[b].trim(),this.editable,this.draggable,this.delete),this.container.insertBefore(a[b],this.input)},remove:function(a){"number"==typeof a&&(a=this.tags(a)),a.parentNode.removeChild(a)},pop:function(){var a=this.tags(-1);a.parentNode.removeChild(a)},tags:function(a){var c=this.container.getElementsByClassName(b);return a?(a=(c.length+a)%c.length,c[a]):c}},k}();